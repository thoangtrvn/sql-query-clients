
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>cloud_utilities package &#8212; SQLClient alpha documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/js/custom.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="cloud_utilities" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SQLClient</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">cloud_utilities.utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="cos.html">cloud_utilities.cos</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql_magic.html">ibmcloudsql.sql_magic</a></li>
<li class="toctree-l1"><a class="reference internal" href="sql_query.html">ibmcloudsql.sql_query</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">cloud_utilities</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">cloud_utilities package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-cloud_utilities.aiops">cloud_utilities.aiops module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cloud-utilities-cos-module">cloud_utilities.cos module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-cloud_utilities.exceptions">cloud_utilities.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-cloud_utilities.sql_magic">cloud_utilities.sql_magic module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-cloud_utilities.sql_query">cloud_utilities.sql_query module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-cloud_utilities.utilities">cloud_utilities.utilities module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-cloud_utilities">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">cloud_utilities</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">cloud_utilities</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="cloud-utilities-package">
<h1>cloud_utilities package<a class="headerlink" href="#cloud-utilities-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cloud_utilities.aiops">
<span id="cloud-utilities-aiops-module"></span><h2>cloud_utilities.aiops module<a class="headerlink" href="#module-cloud_utilities.aiops" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cloud_utilities.aiops.AIOpsSQLClient">
<em class="property">class </em><code class="sig-prename descclassname">cloud_utilities.aiops.</code><code class="sig-name descname">AIOpsSQLClient</code><span class="sig-paren">(</span><em class="sig-param">cloud_apikey=''</em>, <em class="sig-param">sqlquery_instance_crn=''</em>, <em class="sig-param">cos_out_url=''</em>, <em class="sig-param">max_concurrent_jobs=4</em>, <em class="sig-param">client_info='Testing'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cloud_utilities.sql_query.SQLClient" title="cloud_utilities.sql_query.SQLClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">cloud_utilities.sql_query.SQLClient</span></code></a></p>
<p>PARQUET data</p>
<p>If the parameters are missing, we can update using <cite>configure</cite> method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>to SQLClient class</strong> (<em>references</em>) – </p>
</dd>
</dl>
<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.check_if_field_consistent">
<code class="sig-name descname">check_if_field_consistent</code><span class="sig-paren">(</span><em class="sig-param">field_name='object_lifecycle'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.check_if_field_consistent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.check_if_field_consistent" title="Permalink to this definition">¶</a></dt>
<dd><p>check if the data type of a given field is the same across data
Compare day 1st with all other days in the month</p>
<p>======= principals
Day [1]</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;aws&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;identity&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}],</span>
<span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>Day [17-23]</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;aws&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;identity&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>======= object_lifecycle</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;expiration&#39;</span><span class="p">,</span>
        <span class="s1">&#39;nested_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;expiration_time&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;rule_id&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">},</span>
        <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;transition&#39;</span><span class="p">,</span>
        <span class="s1">&#39;nested_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;archive&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nested_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;transition_class&#39;</span><span class="p">,</span>
                <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
                <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;transition_time&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
                <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">},</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}],</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">},</span>
        <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}],</span>
<span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span>
<span class="p">}</span>

<span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;expiration&#39;</span><span class="p">,</span>
    <span class="s1">&#39;nested_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;expiration_time&#39;</span><span class="p">,</span>
        <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;rule_id&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}],</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">},</span>
    <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;transition&#39;</span><span class="p">,</span>
    <span class="s1">&#39;nested_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;archive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;nested_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;restore_expiration_time&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
<span class="o">--&gt;</span>         <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;restored_storage_class&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
<span class="o">--&gt;</span>         <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;restored_time&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
<span class="o">--&gt;</span>         <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;transition_class&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;transition_time&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}],</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">},</span>
        <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}],</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span><span class="p">},</span>
    <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}],</span>
<span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;struct&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_day">
<code class="sig-name descname">copy_into_hive_partitions_full_day</code><span class="sig-paren">(</span><em class="sig-param">prefix_name</em>, <em class="sig-param">cos_out_url=None</em>, <em class="sig-param">columns_list=None</em>, <em class="sig-param">except_columns_list=None</em>, <em class="sig-param">date_info='20191023'</em>, <em class="sig-param">location='eu-de'</em>, <em class="sig-param">DC='rgfra02'</em>, <em class="sig-param">query_granularity='wholeday'</em>, <em class="sig-param">dry_run=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.copy_into_hive_partitions_full_day"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_day" title="Permalink to this definition">¶</a></dt>
<dd><p>copy data from either</p>
<ol class="arabic simple">
<li><p>the given hour (if given) or</p></li>
<li><p>the first hour (1st) of the day</p></li>
</ol>
<p>to the end (23rd)</p>
<p>Hour is based on logfile-written time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix_name</strong> (<em>str</em>) – <p>the prefix to be used when storing the data, e.g.</p>
<blockquote>
<div><p><cite>cos://&lt;cos-name&gt;/&lt;bucket&gt;[/&lt;path&gt;]/&lt;prefix-name&gt;</cite></p>
</div></blockquote>
</p></li>
<li><p><strong>cos_out_url</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>The COS URL where the data should be copied to,</p>
<blockquote>
<div><p><cite>cos://&lt;cos-name&gt;/&lt;bucket&gt;[/&lt;path&gt;]</cite></p>
</div></blockquote>
<p>If omitted, we use self.cos_out_url</p>
</p></li>
<li><p><strong>columns_list</strong> (<em>str | list</em><em>, </em><em>optional</em>) – The single column name or a list of columns to be copied
NOTE: Use ‘*’ to indicate all columns
(default) those defined internally <cite>self.default_columns_list</cite></p></li>
<li><p><strong>except_columns_list</strong> (<em>str | list</em><em>, </em><em>optional</em>) – A name or a list of column names to be excluded
NOTE: Use this wisely with <cite>columns_list</cite> parameter</p></li>
<li><p><strong>date_info</strong> (<em>str</em><em> or </em><em>datetime.datetime</em>) – <ul>
<li><p>string type: example string format: YYYYMMDD - what date to copy to COS URL output</p>
<blockquote>
<div><p>You can also use any accepting format by <a class="reference external" href="https://dateutil.readthedocs.io/en/stable/parser.html">dateutil</a> package.
Example: “2012-01-22 10PM”</p>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>datetime.datetime type:</dt><dd><p><a class="reference external" href="https://dateutil.readthedocs.io/en/stable/examples.html">example</a></p>
</dd>
</dl>
</li>
</ul>
<p>IMPORTANT: A full day scan is used if there is no ‘hour’ provided, or ‘hour = 0’</p>
</p></li>
<li><p><strong>location</strong> (<em>str</em>) – location to copy</p></li>
<li><p><strong>query_granularity</strong> (<em>str</em>) – <p>A value in the list [“halfday”, “perhour”, “wholeday”]</p>
<ul>
<li><p>wholeday = single query</p></li>
<li><p>perhour  = 24 separate queries</p></li>
<li><p>halfhour = 2 separate queries</p></li>
</ul>
<p>This is designed to handle with max-query time limit</p>
</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, then does not do any real query [for testing purpose]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of job_id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_day_test">
<code class="sig-name descname">copy_into_hive_partitions_full_day_test</code><span class="sig-paren">(</span><em class="sig-param">prefix_name</em>, <em class="sig-param">cos_out_url=None</em>, <em class="sig-param">columns_list=None</em>, <em class="sig-param">except_columns_list=None</em>, <em class="sig-param">date_info='20191023'</em>, <em class="sig-param">location='eu-de'</em>, <em class="sig-param">DC='rgfra02'</em>, <em class="sig-param">dry_run=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.copy_into_hive_partitions_full_day_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_day_test" title="Permalink to this definition">¶</a></dt>
<dd><p>first hour (1st) of the day to the end (23rd)</p>
<p class="rubric">Notes</p>
<p>currently: we start with cos://my-cos/my-bucket/prefix/</p>
<ol class="arabic simple">
<li><p>add missing column (Location, Year, Month) to data so that it can be partitioned using these columns,</p></li>
<li><p>and let the system add /Location=eu-de/Year=2019/Month=10/Day=23 before adding the parquet data</p></li>
</ol>
<p>The problem with this: we cannot apply NOJOBPREFIX as it will wipe out from</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cos://my-cos/my-bucket/prefix/</span>
</pre></div>
</div>
<p>instead of adding the column so that it can be partitioned, we
start with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cos://my-cos/my-bucket/prefix/Location=eu-de/Year=2019/Month=10/Day=23/</span>
</pre></div>
</div>
<p>and create the prefix
–&gt; so that JOBNOPREFIX is applied at the deeper path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix_name</strong> (<em>str</em>) – the prefix to be used, e.g. cos://&lt;cos-name&gt;/&lt;bucket&gt;/&lt;path&gt;/&lt;prefix-name&gt;</p></li>
<li><p><strong>cos_out_url</strong> (<em>str</em><em>, </em><em>optional</em>) – The COS URL where the data should be copied to, cos://&lt;cos-name&gt;/&lt;bucket&gt;/&lt;path&gt;
If omitted, we use self.cos_out_url</p></li>
<li><p><strong>columns_list</strong> (<em>str | list</em><em>, </em><em>optional</em>) – The single column name or a list of columns to be copied
NOTE: Use ‘*’ to indicate all columns
(default) those defined internally <cite>self.default_columns_list</cite></p></li>
<li><p><strong>except_columns_list</strong> (<em>str | list</em><em>, </em><em>optional</em>) – A name or a list of column names to be excluded
NOTE: Use this wisely with <cite>columns_list</cite> parameter</p></li>
<li><p><strong>date_info</strong> (<em>str</em><em> or </em><em>datetime.datetime</em>) – <ul>
<li><p>string type: example string format: YYYYMMDD - what date to copy to COS URL output</p></li>
</ul>
<p>You can also use any accepting format by <cite>dateutil &lt;https://dateutil.readthedocs.io/en/stable/parser.html&gt;</cite> package.
Example: “2012-01-22 10PM”</p>
<ul>
<li><dl class="simple">
<dt>datetime.datetime type:</dt><dd><p><a class="reference external" href="https://dateutil.readthedocs.io/en/stable/examples.html">example</a></p>
</dd>
</dl>
</li>
</ul>
<p>IMPORTANT: A full day scan is used if there is no ‘hour’ provided, or ‘hour = 0’</p>
</p></li>
<li><p><strong>location</strong> (<em>str</em>) – location to copy</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, then does not do any real query [for testing purpose]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of job_id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_month">
<code class="sig-name descname">copy_into_hive_partitions_full_month</code><span class="sig-paren">(</span><em class="sig-param">prefix_name</em>, <em class="sig-param">cos_out_url=None</em>, <em class="sig-param">columns_list=None</em>, <em class="sig-param">except_columns_list=None</em>, <em class="sig-param">date_info='201910'</em>, <em class="sig-param">location='eu-de'</em>, <em class="sig-param">DC='rgfra02'</em>, <em class="sig-param">query_granularity='wholeday'</em>, <em class="sig-param">dry_run=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.copy_into_hive_partitions_full_month"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_month" title="Permalink to this definition">¶</a></dt>
<dd><p>copy from either</p>
<ol class="arabic simple">
<li><p>the beginning of the month (if only YYYY and MM is available)</p></li>
<li><p>the given day - if provided and ONLY when <cite>cos_out_url</cite> is in str format, e.g. “20191020”)</p></li>
</ol>
<p>until the end-of-month.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date_info</strong> (<em>str | datetime.datetime</em>) – In the form either ‘YYYYMM’ or ‘YYYYMMDD’ or a datetime ISO standard form</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_week">
<code class="sig-name descname">copy_into_hive_partitions_full_week</code><span class="sig-paren">(</span><em class="sig-param">prefix_name</em>, <em class="sig-param">cos_out_url=None</em>, <em class="sig-param">columns_list=None</em>, <em class="sig-param">except_columns_list=None</em>, <em class="sig-param">date_info='201910'</em>, <em class="sig-param">week_index=None</em>, <em class="sig-param">location='eu-de'</em>, <em class="sig-param">DC='rgfra02'</em>, <em class="sig-param">query_granularity='wholeday'</em>, <em class="sig-param">dry_run=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.copy_into_hive_partitions_full_week"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_week" title="Permalink to this definition">¶</a></dt>
<dd><p>copy from one week, i.e. 7-days, from</p>
<ol class="arabic simple">
<li><p>a explicitly given start date - if provided and ONLY when <cite>cos_out_url</cite> is in str format, e.g. “20191020”)</p></li>
<li><p>a implicitly given start date - by using <cite>week_index</cite></p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>week_index</strong> (<em>int</em><em>, </em><em>optional</em>) – A value should be in the range 1..4</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_year">
<code class="sig-name descname">copy_into_hive_partitions_full_year</code><span class="sig-paren">(</span><em class="sig-param">prefix_name</em>, <em class="sig-param">cos_out_url=None</em>, <em class="sig-param">columns_list=None</em>, <em class="sig-param">except_columns_list=None</em>, <em class="sig-param">date_info='2020'</em>, <em class="sig-param">location='eu-de'</em>, <em class="sig-param">DC='rgfra02'</em>, <em class="sig-param">query_granularity='wholeday'</em>, <em class="sig-param">dry_run=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.copy_into_hive_partitions_full_year"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.copy_into_hive_partitions_full_year" title="Permalink to this definition">¶</a></dt>
<dd><p>copy from either</p>
<ol class="arabic simple">
<li><p>the beginning of the year (if only YYYY is available)</p></li>
<li><p>the given day - if provided and ONLY when <cite>cos_out_url</cite> is in str format, e.g. “20191020”)</p></li>
</ol>
<p>until the end-of-year or now (whichever is the earlier)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date_info</strong> (<em>str | datetime.datetime</em>) – In the form either ‘YYYY’ or a datetime ISO standard form</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.get_catalog_table_partitioned">
<code class="sig-name descname">get_catalog_table_partitioned</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">cos_url=None</em>, <em class="sig-param">prefix_name=None</em>, <em class="sig-param">force_recreate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.get_catalog_table_partitioned"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.get_catalog_table_partitioned" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – the name of the catalog table to be created</p></li>
<li><p><strong>cos_url</strong> (<em>str</em><em>, </em><em>optional</em>) – The COS URL from which the catalog table should reference to
If not provided, it uses the internal <cite>self.cos_in_url</cite>
IMPORTANT: Use only one of the two paramters <cite>prefix_name</cite> and <cite>cos_url</cite></p></li>
<li><p><strong>prefix_name</strong> (<em>str</em>) – the prefix to be used, e.g. cos://&lt;cos-name&gt;/&lt;bucket&gt;/&lt;path&gt;/&lt;prefix-name&gt;
If it is used, then the value of <cite>cos_url</cite> would be “&lt;self.cos_out_url&gt;/<cite>prefix_name</cite>”.
IMPORTANT: Use only one of the two paramters <cite>prefix_name</cite> and <cite>cos_url</cite></p></li>
<li><p><strong>force_recreate</strong> (<em>bool</em><em>, </em><em>optional</em>) – if True, delete (if existed) and recreate</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.get_ts_datasource">
<code class="sig-name descname">get_ts_datasource</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">key</em>, <em class="sig-param">time_stamp</em>, <em class="sig-param">observation</em>, <em class="sig-param">cos_out</em>, <em class="sig-param">granularity='raw'</em>, <em class="sig-param">where_clause=''</em>, <em class="sig-param">ops='avg'</em>, <em class="sig-param">dry_run=False</em>, <em class="sig-param">num_objects=20</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.get_ts_datasource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.get_ts_datasource" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the data source for time-series in the next-query, in that the result is
broken down into multiple objects using <cite>num_objects</cite> as the criteria</p>
<p>It will returns the data source in 3 columns:
&lt;key&gt;, time_stamp, observation</p>
<dl class="simple">
<dt>table: str</dt><dd><p>The catalog table name</p>
</dd>
<dt>key: str</dt><dd><p>The column name being used as the key</p>
</dd>
<dt>time_stamp: str</dt><dd><p>The column name being used as timestick</p>
</dd>
<dt>observation: str</dt><dd><p>The column name being used as value</p>
</dd>
<dt>cos_out: str</dt><dd><p>The COS URL where the data is copied to - later as data source</p>
</dd>
<dt>granularity: str</dt><dd><p>a value in one of [“raw”, “per_min”, “per_&lt;x&gt;min”, “per_sec”, “per_&lt;x&gt;sec”]
with &lt;x&gt; is a number divided by 60, e.g. 10, 15</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The COS_URL where the data with 3 fields (key, time_stamp, observation)
and can be digested into time-series via TIME_SERIES_FORMAT(key, timestick, value)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.aiops.AIOpsSQLClient.get_ts_datasource_by_rows">
<code class="sig-name descname">get_ts_datasource_by_rows</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">key</em>, <em class="sig-param">time_stamp</em>, <em class="sig-param">observation</em>, <em class="sig-param">cos_out</em>, <em class="sig-param">granularity='raw'</em>, <em class="sig-param">where_clause=''</em>, <em class="sig-param">ops='avg'</em>, <em class="sig-param">dry_run=False</em>, <em class="sig-param">num_rows=1000000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/aiops.html#AIOpsSQLClient.get_ts_datasource_by_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.aiops.AIOpsSQLClient.get_ts_datasource_by_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the data source for time-series in the next-query, in that the result is
broken down into multiple objects using <cite>num_rows</cite> as the criteria</p>
<p>It will returns the data source in 3 columns:
&lt;key&gt;, time_stamp, observation</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cloud-utilities-cos-module">
<h2>cloud_utilities.cos module<a class="headerlink" href="#cloud-utilities-cos-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cloud_utilities.exceptions">
<span id="cloud-utilities-exceptions-module"></span><h2>cloud_utilities.exceptions module<a class="headerlink" href="#module-cloud_utilities.exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="cloud_utilities.exceptions.MaxRequestError">
<em class="property">exception </em><code class="sig-prename descclassname">cloud_utilities.exceptions.</code><code class="sig-name descname">MaxRequestError</code><span class="sig-paren">(</span><em class="sig-param">msg</em>, <em class="sig-param">original_exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/exceptions.html#MaxRequestError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.exceptions.MaxRequestError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-cloud_utilities.sql_magic">
<span id="cloud-utilities-sql-magic-module"></span><h2>cloud_utilities.sql_magic module<a class="headerlink" href="#module-cloud_utilities.sql_magic" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cloud_utilities.sql_magic.SQLMagic">
<em class="property">class </em><code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">SQLMagic</code><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cloud_utilities.sql_magic.TimeSeriesSchema" title="cloud_utilities.sql_magic.TimeSeriesSchema"><code class="xref py py-class docutils literal notranslate"><span class="pre">cloud_utilities.sql_magic.TimeSeriesSchema</span></code></a></p>
<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.format_">
<code class="sig-name descname">format_</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.format_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.format_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.from_cos_">
<code class="sig-name descname">from_cos_</code><span class="sig-paren">(</span><em class="sig-param">cos_url</em>, <em class="sig-param">format_type='parquet'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.from_cos_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.from_cos_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.from_table_">
<code class="sig-name descname">from_table_</code><span class="sig-paren">(</span><em class="sig-param">table</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.from_table_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.from_table_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.from_view_">
<code class="sig-name descname">from_view_</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.from_view_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.from_view_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.group_by_">
<code class="sig-name descname">group_by_</code><span class="sig-paren">(</span><em class="sig-param">columns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.group_by_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.group_by_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.order_by_">
<code class="sig-name descname">order_by_</code><span class="sig-paren">(</span><em class="sig-param">columns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.order_by_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.order_by_" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>condition</strong> (<em>str</em>) – a string representing a comma-separated list of columns</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.partition_objects_">
<code class="sig-name descname">partition_objects_</code><span class="sig-paren">(</span><em class="sig-param">num_objects</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.partition_objects_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.partition_objects_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.partition_rows_">
<code class="sig-name descname">partition_rows_</code><span class="sig-paren">(</span><em class="sig-param">num_rows</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.partition_rows_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.partition_rows_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.print_sql">
<code class="sig-name descname">print_sql</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.print_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.print_sql" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.reset_">
<code class="sig-name descname">reset_</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.reset_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.reset_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.select_">
<code class="sig-name descname">select_</code><span class="sig-paren">(</span><em class="sig-param">columns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.select_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.select_" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>columns: str</dt><dd><p>a string representing a comma-separated list of columns</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.store_at_">
<code class="sig-name descname">store_at_</code><span class="sig-paren">(</span><em class="sig-param">cos_url</em>, <em class="sig-param">format_type=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.store_at_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.store_at_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.where_">
<code class="sig-name descname">where_</code><span class="sig-paren">(</span><em class="sig-param">condition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.where_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.where_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.SQLMagic.with_">
<code class="sig-name descname">with_</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#SQLMagic.with_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.SQLMagic.with_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cloud_utilities.sql_magic.TimeSeriesSchema">
<em class="property">class </em><code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">TimeSeriesSchema</code><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#TimeSeriesSchema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.TimeSeriesSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="cloud_utilities.sql_magic.TimeSeriesTransformInput">
<em class="property">class </em><code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">TimeSeriesTransformInput</code><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#TimeSeriesTransformInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.TimeSeriesTransformInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="cloud_utilities.sql_magic.TimeSeriesTransformInput.transform_sql">
<em class="property">classmethod </em><code class="sig-name descname">transform_sql</code><span class="sig-paren">(</span><em class="sig-param">f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#TimeSeriesTransformInput.transform_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.TimeSeriesTransformInput.transform_sql" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_magic.TimeSeriesTransformInput.ts_segment_by_time">
<em class="property">classmethod </em><code class="sig-name descname">ts_segment_by_time</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#TimeSeriesTransformInput.ts_segment_by_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.TimeSeriesTransformInput.ts_segment_by_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Help to transform from user-friendly query into library-friendly query</p>
<p>Example:
ts_segment_by_time(ts, per_hour, per_hour)
ts_segment_by_time(ts, hour, hour)</p>
<p>into</p>
<p>ts_segment_by_time(ts, 3600000, 3600000)</p>
<p>as ts_segment_by_time operates at mili-seconds level, hour=60*60*1000 miliseconds</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_magic.format_sql">
<code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">format_sql</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#format_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.format_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>format SQL string to ensure proper content for string comparison</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sql_stmt</strong> (<em>str</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_magic.print_sql">
<code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">print_sql</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#print_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.print_sql" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_magic.test_01">
<code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">test_01</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#test_01"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.test_01" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_magic.test_02">
<code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">test_02</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#test_02"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.test_02" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_magic.test_03">
<code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">test_03</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#test_03"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.test_03" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_magic.test_04">
<code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">test_04</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#test_04"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.test_04" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_magic.test_chain_function">
<code class="sig-prename descclassname">cloud_utilities.sql_magic.</code><code class="sig-name descname">test_chain_function</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_magic.html#test_chain_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_magic.test_chain_function" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-cloud_utilities.sql_query">
<span id="cloud-utilities-sql-query-module"></span><h2>cloud_utilities.sql_query module<a class="headerlink" href="#module-cloud_utilities.sql_query" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cloud_utilities.sql_query.SQLClient">
<em class="property">class </em><code class="sig-prename descclassname">cloud_utilities.sql_query.</code><code class="sig-name descname">SQLClient</code><span class="sig-paren">(</span><em class="sig-param">cloud_apikey=''</em>, <em class="sig-param">sqlquery_instance_crn=''</em>, <em class="sig-param">cos_out_url=''</em>, <em class="sig-param">max_concurrent_jobs=4</em>, <em class="sig-param">client_info=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cos.COSClient</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sql_magic.SQLMagic</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cloud_utilities.hive_table.HIVETable</span></code></p>
<p>The class the provides necessary APIs to interact with</p>
<ol class="arabic simple">
<li><p>IBM SQL Serverless service</p></li>
<li><p>IBM COS service</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cloud_apikey</strong> (<em>str</em><em>, </em><em>optional</em>) – an account-level API key [manage/Access (IAM)/IBM Cloud API keys]</p></li>
<li><p><strong>sqlquery_instance_crn</strong> (<em>str</em><em>, </em><em>optional</em>) – CRN from SQLQuery instance</p></li>
<li><p><strong>cos_out_url</strong> (<em>str</em><em>, </em><em>optional</em>) – the URI where retrieved data is stored</p></li>
<li><p><strong>max_concurrent_jobs</strong> (<em>int</em><em>, </em><em>optional</em>) – the max number of concurrent jobs</p></li>
<li><p><strong>client_info</strong> (<em>str</em><em>, </em><em>optional</em>) – User-defined string</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.analyze">
<code class="sig-name descname">analyze</code><span class="sig-paren">(</span><em class="sig-param">job_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.analyze"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.analyze" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides some insights about the data layout from the current SQL statement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_id</strong> (<em>str</em>) – The job ID</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<ol class="arabic simple">
<li><p>new sql only when max_obj_size &gt; 300MB</p></li>
<li><p>check if STORED AS is used, if not suggested adding to sql with PARQUET or JSON</p></li>
<li><p>add PARITIONED … not at the end, but right after STORED AS (which can be missing in original SQL)</p></li>
</ol>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.configure">
<code class="sig-name descname">configure</code><span class="sig-paren">(</span><em class="sig-param">cloud_apikey</em>, <em class="sig-param">sqlquery_instance_crn</em>, <em class="sig-param">cos_out_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>use this to update the configuration that is missing at __init__ method</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.delete_result">
<code class="sig-name descname">delete_result</code><span class="sig-paren">(</span><em class="sig-param">job_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.delete_result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.delete_result" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dataframe, with 3 rows, and one field name “Deleted Object”</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dataframe</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Delete 3 entries in the output COS</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cos://&lt;cos-name&gt;/bucket_name/jobid=&lt;JOB-ID-NUMBER&gt;/</span>
<span class="go">cos://&lt;cos-name&gt;/bucket_name/jobid=&lt;JOB-ID-NUMBER&gt;/_SUCCESS</span>
<span class="go">cos://&lt;cos-name&gt;/bucket_name/jobid=&lt;JOB-ID-NUMBER&gt;/[parquet|csv|json]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The last entry holds the real data, and the last word also indicates the data format</p></li>
<li><p>‘JOBPREFIX NONE’  would avoid having ‘jobid=JOB-ID-NAME’ in the URL</p></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.describe_table">
<code class="sig-name descname">describe_table</code><span class="sig-paren">(</span><em class="sig-param">table_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.describe_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.describe_table" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.drop_all_catalog_tables">
<code class="sig-name descname">drop_all_catalog_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.drop_all_catalog_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.drop_all_catalog_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all created catalog tables in the project</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True [if success]</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.drop_catalog_table">
<code class="sig-name descname">drop_catalog_table</code><span class="sig-paren">(</span><em class="sig-param">table_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.drop_catalog_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.drop_catalog_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop a given catalog table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>table_name</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the catalog table
If skipped, the being tracked catalog-table is used</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>none</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.drop_catalog_tables">
<code class="sig-name descname">drop_catalog_tables</code><span class="sig-paren">(</span><em class="sig-param">table_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.drop_catalog_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.drop_catalog_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop a list of catalog tables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>table_names</strong> (<em>list</em>) – A list of catalog tables</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.engine">
<em class="property">property </em><code class="sig-name descname">engine</code><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>retrieve the sqlClient engine object</p>
<p>We use this to be able to use all functionality provided by ibmcloudsql package</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ibmcloudsql.SQLQuery</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.export_job_history">
<code class="sig-name descname">export_job_history</code><span class="sig-paren">(</span><em class="sig-param">cos_out_url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.export_job_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.export_job_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the most recent jobs to COS URL</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cos_out_url</strong> (<em>str</em>) – A COS URL with prefix, i.e. cos://&lt;cos-name&gt;/&lt;bucket&gt;/&lt;prefix&gt;,
where the data will be stored</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_catalog_table">
<code class="sig-name descname">get_catalog_table</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">cos_url=None</em>, <em class="sig-param">force_recreate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_catalog_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_catalog_table" title="Permalink to this definition">¶</a></dt>
<dd><p>synchronous version</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – The name of the catalog table</p></li>
<li><p><strong>cos_url</strong> (<em>str</em><em>, </em><em>optional</em>) – The COS URL from which the catalog table should reference to
If not provided, it uses the internal <cite>self.cos_in_url</cite></p></li>
<li><p><strong>force_recreate</strong> (<em>bool</em><em>, </em><em>optional</em>) – (True) force to recreate an existing catalog table</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>none if job “failed”</em></p></li>
<li><p><em>otherwise returns</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_catalog_table_async">
<code class="sig-name descname">get_catalog_table_async</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">cos_url=None</em>, <em class="sig-param">force_recreate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_catalog_table_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_catalog_table_async" title="Permalink to this definition">¶</a></dt>
<dd><p>the async version of <cite>get_catalog_table</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – The name of the catalog table</p></li>
<li><p><strong>cos_url</strong> (<em>str</em><em>, </em><em>optional</em>) – The COS URL from which the catalog table should reference to
If not provided, it uses the internal <cite>self.cos_in_url</cite></p></li>
<li><p><strong>force_recreate</strong> (<em>bool</em><em>, </em><em>optional</em>) – (True) force to recreate an existing catalog table</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>job_id [if the table is being created]</em></p></li>
<li><p><em>None   [if the table already created]</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_catalog_table_partitioned">
<code class="sig-name descname">get_catalog_table_partitioned</code><span class="sig-paren">(</span><em class="sig-param">table_name</em>, <em class="sig-param">cos_url=None</em>, <em class="sig-param">force_recreate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_catalog_table_partitioned"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_catalog_table_partitioned" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a partitioned catalog table. We need to call <cite>refresh_cache_table_partitioned</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<em>str</em>) – the name of the catalog table to be created</p></li>
<li><p><strong>cos_url</strong> (<em>str</em><em>, </em><em>optional</em>) – The COS URL from which the catalog table should reference to
If not provided, it uses the internal <cite>self.cos_in_url</cite></p></li>
<li><p><strong>force_recreate</strong> (<em>bool</em>) – (True) force to recreate an existing catalog table</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_cos_summary">
<code class="sig-name descname">get_cos_summary</code><span class="sig-paren">(</span><em class="sig-param">cos_resultset_location</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_cos_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_cos_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Return information for the given COR URL (may include bucket + prefix)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul>
<li><p><em>dict</em> –</p>
<dl class="simple">
<dt>A dict with keys</dt><dd><p>”largest_object”
“largest_object_size”
“newest_object_timestamp”
“oldest_object_timestamp”
“smallest_object”
“smallest_object_size”
“total_objects”
“total_volume”
“url”</p>
</dd>
</dl>
</li>
<li><p><strong>Example</strong> (<em>self.get_cos_summary_demo()</em>)</p></li>
<li><p><em>Call ibmcloudsql.SQLCLient.get_cos_summary()</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_cos_summary_demo">
<code class="sig-name descname">get_cos_summary_demo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_cos_summary_demo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_cos_summary_demo" title="Permalink to this definition">¶</a></dt>
<dd><p>return a demo example of the result of .get_cos_summary(cos_resultset_location)
with</p>
<ul class="simple">
<li><p>cos_resultset_location is the cos://&lt;cos-name&gt;/&lt;bucket&gt;/[jobid=JOB-ID-NAME]/</p></li>
</ul>
<p>NOTE: ‘JOBPREFIX NONE’  would avoid having ‘jobid=JOB-ID-NAME’ in the URL</p>
<p>total_volume:  &lt;float-number&gt; [KB | MB | GB | TB]</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_data_skipping">
<code class="sig-name descname">get_data_skipping</code><span class="sig-paren">(</span><em class="sig-param">cos_out_url</em>, <em class="sig-param">meta_summary</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_data_skipping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_data_skipping" title="Permalink to this definition">¶</a></dt>
<dd><p>One needs to decide which columns to index and choose an index type for each column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cos_out_url</strong> (<em>str</em>) – COS url should specify the top level (i.e., root) of the dataset. A unique index is built per dataset (identified by its root path)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Two users with different SQL Query accounts create independent indexes on the same dataset.</p></li>
<li><p>Once a data skipping index has been created, it is automatically used by SQL Query when running queries.</p></li>
</ul>
<p><a class="reference external" href="https://www.ibm.com/cloud/blog/data-skipping-for-ibm-cloud-sql-query">references</a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_job">
<code class="sig-name descname">get_job</code><span class="sig-paren">(</span><em class="sig-param">job_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_job" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a dict of job details (see keys below)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;job_id&#39;</span><span class="p">,</span>
<span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="p">:</span> <span class="s2">&quot;running&quot;</span><span class="p">,</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span> <span class="s2">&quot;completed&quot;</span>
<span class="s1">&#39;statement&#39;</span><span class="p">:</span> <span class="s2">&quot;SELECT * ...&quot;</span> <span class="p">[</span><span class="n">the</span> <span class="n">content</span> <span class="n">of</span> <span class="n">SQL</span> <span class="n">Query</span><span class="p">],</span>
<span class="s1">&#39;plan_id&#39;</span> <span class="p">,</span>
<span class="s1">&#39;submit_time&#39;</span><span class="p">,</span>
<span class="s1">&#39;resultset_location&#39;</span><span class="p">,</span>
<span class="s1">&#39;rows_returned&#39;</span><span class="p">,</span>
<span class="s1">&#39;rows_read&#39;</span> <span class="p">,</span>
<span class="s1">&#39;bytes_read&#39;</span> <span class="p">,</span>
<span class="s1">&#39;resultset_format&#39;</span><span class="p">:</span> <span class="s1">&#39;csv&#39;</span><span class="p">,</span>
<span class="s1">&#39;end_time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-03-06T21:58:26.274Z&#39;</span><span class="p">,</span>
<span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="s1">&#39;username@us.ibm.com&#39;</span>
</pre></div>
</div>
</div>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;bytes_read&quot;</span><span class="p">:</span> <span class="mi">43058</span><span class="p">,</span>
    <span class="s2">&quot;end_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-03-08T03:20:39.131Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;job_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ab3f7567-280b-40c9-87a9-256b846f89db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;plan_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ead0f7f5-0c96-40c0-9aae-63c4846d8188&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resultset_format&quot;</span><span class="p">:</span> <span class="s2">&quot;parquet&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resultset_location&quot;</span><span class="p">:</span> <span class="s2">&quot;cos://s3.us-south.cloud-object-storage.appdomain.cloud/tuan-sql-result/customer_orders/jobid=ab3f7567-280b-40c9-87a9-256b846f89db&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rows_read&quot;</span><span class="p">:</span> <span class="mi">921</span><span class="p">,</span>
    <span class="s2">&quot;rows_returned&quot;</span><span class="p">:</span> <span class="mi">830</span><span class="p">,</span>
    <span class="s2">&quot;statement&quot;</span><span class="p">:</span> <span class="s2">&quot;SELECT OrderID, c.CustomerID CustomerID, CompanyName, ContactName, ContactTitle, Address, City, Region, PostalCode, Country, Phone, Fax          EmployeeID, OrderDate, RequiredDate, ShippedDate, ShipVia, Freight, ShipName, ShipAddress,          ShipCity, ShipRegion, ShipPostalCode, ShipCountry FROM cos://us-geo/sql/orders.parquet STORED AS PARQUET o,          cos://us-geo/sql/customers.parquet STORED AS PARQUET c          WHERE c.CustomerID = o.CustomerID          INTO cos://us-south/tuan-sql-result/customer_orders STORED AS PARQUET PARTITIONED BY (ShipCountry, ShipCity)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;completed&quot;</span><span class="p">,</span>
    <span class="s2">&quot;submit_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-03-08T03:20:00.617Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;tmhoangt@us.ibm.com&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_job_demo">
<code class="sig-name descname">get_job_demo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_job_demo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_job_demo" title="Permalink to this definition">¶</a></dt>
<dd><p>return an example when you issue get_job(job_idj)</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_jobs">
<code class="sig-name descname">get_jobs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the up-to-30 most recent jobs from the given Cloud API</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a pd.DataFrame with fields - total 30 rows, corresponding to the 30 most recent jobs</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dataframe</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">job_id</span>
<span class="go">status: &quot;running&quot;, &quot;failed&quot;, &quot;completed&quot;</span>
<span class="go">user_id</span>
<span class="go">statement</span>
<span class="go">resultset_location</span>
<span class="go">submit_time</span>
<span class="go">end_time</span>
<span class="go">rows_read</span>
<span class="go">rows_returned</span>
<span class="go">bytes_read</span>
<span class="go">error</span>
<span class="go">error_message</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">job_id      status  user_id statement       resultset_location      submit_time     end_time        rows_read       rows_returned   bytes_read      error   error_message</span>
<span class="go">8d9c5a97-808f-4a08-9cc3-78e3f07f7ba8        completed       tmhoangt@us.ibm.com     SELECT o.OrderID, c.CompanyName, e.FirstName, e.LastName FROM cos://us-geo/sql/orders.parquet STORED AS PARQUET o, cos://us-geo/sql/employees.parquet STORED AS PARQUET e, cos://us-geo/sql/customers.parquet STORED AS PARQUET c WHERE e.EmployeeID = o.EmployeeID AND c.CustomerID = o.CustomerID AND o.ShippedDate &gt; o.RequiredDate AND o.OrderDate &gt; &quot;1998-01-01&quot; ORDER BY c.CompanyName    cos://s3.us-south.cloud-object-storage.appdomain.cloud/tuan-sql-result/jobid=8d9c5a97-808f-4a08-9cc3-78e3f07f7ba8       2020-02-21T16:19:03.638Z        2020-02-21T16:19:13.691Z        1760    29      41499   None    None</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>get_jobs() is used by export_job_history(cos_out_url) which is used to save such data</p></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_jobs_count_with_status">
<code class="sig-name descname">get_jobs_count_with_status</code><span class="sig-paren">(</span><em class="sig-param">status</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_jobs_count_with_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_jobs_count_with_status" title="Permalink to this definition">¶</a></dt>
<dd><p>return the number of jobs in the SQL Query server for the given <cite>status</cite></p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_jobs_matching">
<code class="sig-name descname">get_jobs_matching</code><span class="sig-paren">(</span><em class="sig-param">job_id_list</em>, <em class="sig-param">status='completed'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_jobs_matching"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_jobs_matching" title="Permalink to this definition">¶</a></dt>
<dd><p>return the list of job_id that have the given status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_id_list</strong> (<em>list</em>) – List of job_id</p></li>
<li><p><strong>status</strong> (<em>str</em><em>, </em><em>optional</em>) – “completed”, or “failed”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_number_running_jobs">
<code class="sig-name descname">get_number_running_jobs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_number_running_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_number_running_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>return the number of running jobs in the SQL Query server</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_result">
<code class="sig-name descname">get_result</code><span class="sig-paren">(</span><em class="sig-param">job_id</em>, <em class="sig-param">pagenumber=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_result" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_id</strong> (<em>int</em>) – The value, if not stored, can be retrieved from self.get_jobs()</p></li>
<li><p><strong>pagenumber</strong> (<em>int</em><em>, </em><em>optional</em>) – If the data, from the given <cite>job_id</cite> is saved in pages/partitions, then this should be a value
in the range from 1 to len(self.list_results(job_id))</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dataframe holding the queried data from a completed job</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dataframe</p>
</dd>
</dl>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl -XGET                 --url &quot;https://api.sql-query.cloud.ibm.com/v2/sql_jobs?instance_crn=&lt;YOUR_SQL_QUERY_CRN&gt;&quot;                 -H &quot;Accept: application/json&quot;                 -H &quot;Authorization: Bearer &lt;YOUR_BEARER_TOKEN&gt;&quot;                  -H &quot;Content-Type: application/json&quot;</span>

<span class="go">&quot;&quot;&quot;</span>
<span class="go">{</span>
<span class="go">&quot;jobs&quot;: [</span>
<span class="go">    {</span>
<span class="go">    &quot;job_id&quot;: &quot;7ebed7f7-00dc-44a2-acfa-5bdb53889648&quot;,</span>
<span class="go">    &quot;status&quot;: &quot;completed&quot;,</span>
<span class="go">    &quot;submit_time&quot;: &quot;2018-08-14T08:45:54.012Z&quot;,</span>
<span class="go">    &quot;user_id&quot;: &quot;user1@ibm.com&quot;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">    &quot;job_id&quot;: &quot;ffde4c5a-1cc2-448b-b377-43573818e5d8&quot;,</span>
<span class="go">    &quot;status&quot;: &quot;completed&quot;,</span>
<span class="go">    &quot;submit_time&quot;: &quot;2018-08-14T08:47:33.350Z&quot;,</span>
<span class="go">    &quot;user_id&quot;: &quot;user1@ibm.com&quot;</span>
<span class="go">    }</span>
<span class="go">]</span>
<span class="go">}</span>
<span class="go">&quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;https://api.sql-query.cloud.ibm.com/v2/sql_jobs/</span><span class="si">{}</span><span class="s2">?instance_crn=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jobId</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_crn</span><span class="p">),</span>
    <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request_headers</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span> <span class="ow">or</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
    <span class="n">status_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cloud</span><span class="o">.</span><span class="n">ibm</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">apidocs</span><span class="o">/</span><span class="n">sql</span><span class="o">-</span><span class="n">query</span><span class="c1">#run-an-sql-job</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.get_schema_data">
<code class="sig-name descname">get_schema_data</code><span class="sig-paren">(</span><em class="sig-param">cos_url</em>, <em class="sig-param">type='json'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.get_schema_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.get_schema_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the schema information</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cos_url</strong> (<em>str</em>) – The COS URL where data is stored</p></li>
<li><p><strong>type</strong> (<em>str</em><em>, </em><em>optional</em>) – The format type of the data, default is ‘json’
Use from [‘json’, ‘csv’, ‘parquet’] with case-insensitive</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.help">
<code class="sig-name descname">help</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.help"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.help" title="Permalink to this definition">¶</a></dt>
<dd><p>Help method</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.initiate_data_skipping">
<code class="sig-name descname">initiate_data_skipping</code><span class="sig-paren">(</span><em class="sig-param">cos_out</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.initiate_data_skipping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.initiate_data_skipping" title="Permalink to this definition">¶</a></dt>
<dd><p>Before creating indexes, define the base location in COS to store them by using the following command:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cos_out</strong> (<em>str</em>) – The COS URL where the index metadata data are stored</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Metadata should not be stored under the path where the data is stored to avoid schema conflicts.</p></li>
<li><p>Make sure you use a path where you have write access if you need to create, refresh, or delete indexes.</p></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.list_results">
<code class="sig-name descname">list_results</code><span class="sig-paren">(</span><em class="sig-param">job_id</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.list_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.list_results" title="Permalink to this definition">¶</a></dt>
<dd><p>NOTE: A single SQL Query can store the queried data in the COS output
in multiple objects/partitions</p>
<p>When one of those below is used</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[ PARTITIONED BY,</span>
<span class="go">PARTITIONED EVERY x ROWS      [implicitly used with pagesize=X option]</span>
<span class="go">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_id</strong> (<em>str</em>) – The Job ID</p></li>
<li><p><strong>blocking</strong> (<em>bool</em><em>, </em><em>default: True</em>) – If True, wait for the available slot in the work queue</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>None (or nothing) if the function fails</em></p></li>
<li><p><strong>DataFrame (4 fields</strong> (<em>ObjectURL, Size, Bucket, Object) - each row correspond to the information of one partition</em>)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – </p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>To know the number of partitions being used, use ‘len(self.list_results(job_id))’</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.list_results_demo">
<code class="sig-name descname">list_results_demo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.list_results_demo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.list_results_demo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.logon">
<code class="sig-name descname">logon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.logon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.logon" title="Permalink to this definition">¶</a></dt>
<dd><p>”
An AIM token is needed for any operations to IBM cloud services (e.g. COS)
A new AIM token is created after 300 seconds.
A token is valid for 3600 seconds</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.my_jobs">
<em class="property">property </em><code class="sig-name descname">my_jobs</code><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.my_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return information about jobs already queried via <cite>get_job()</cite>
issued by this SQLClient class object</p>
<p>This is different from <a class="reference internal" href="#cloud_utilities.sql_query.SQLClient.get_jobs" title="cloud_utilities.sql_query.SQLClient.get_jobs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_jobs()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.process_failed_jobs_until_all_completed">
<code class="sig-name descname">process_failed_jobs_until_all_completed</code><span class="sig-paren">(</span><em class="sig-param">job_id_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.process_failed_jobs_until_all_completed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.process_failed_jobs_until_all_completed" title="Permalink to this definition">¶</a></dt>
<dd><p>re-send those that are failed - due to the time-out mechanism of SQL Query server</p>
<p>Here, if job_time &lt; 40 minutes, then we re-send.</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.refresh_cache_table_partitioned">
<code class="sig-name descname">refresh_cache_table_partitioned</code><span class="sig-paren">(</span><em class="sig-param">table_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.refresh_cache_table_partitioned"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.refresh_cache_table_partitioned" title="Permalink to this definition">¶</a></dt>
<dd><p>This step is required after creating a new partitioned catalog table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>table_name</strong> (<em>str</em>) – The partitioned table name</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.rename_exact_result">
<code class="sig-name descname">rename_exact_result</code><span class="sig-paren">(</span><em class="sig-param">job_id</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.rename_exact_result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.rename_exact_result" title="Permalink to this definition">¶</a></dt>
<dd><p>A SQL Query can store data into partitioned/paginated multiple objects, or single object.</p>
<p>Even with single object, indeed, multiple objects are created, two of them has size 0.
(&lt;URL&gt;/_SUCCESS, and &lt;URL&gt;/) beside the one that holds data (&lt;URL&gt;/)</p>
<p>This API delete the two 0-size objects, and keep only the one that holds data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_id</strong> (<em>str</em>) – A string representation of job_id</p></li>
<li><p><strong>blocking</strong> (<em>bool</em><em>, </em><em>optional</em>) – Default is wait</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the job_id is the job in that the result is “PARTITIONED BY” or “pagesize=” or “PARITIONED EVERY x ROWS” is used
    or the rename_exact_result() has been applied to this job_id.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.rename_exact_result_joblist">
<code class="sig-name descname">rename_exact_result_joblist</code><span class="sig-paren">(</span><em class="sig-param">job_list</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.rename_exact_result_joblist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.rename_exact_result_joblist" title="Permalink to this definition">¶</a></dt>
<dd><p>The bulk mode of <cite>rename_exact_result</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_list</strong> (<em>list</em>) – A list of job_id</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">pagesize=None</em>, <em class="sig-param">get_result=False</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.run" title="Permalink to this definition">¶</a></dt>
<dd><p>run the internal SQL statement provided by SQLMagic</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.run_sql">
<code class="sig-name descname">run_sql</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em>, <em class="sig-param">pagesize=None</em>, <em class="sig-param">get_result=False</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.run_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.run_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the behavior of ibmcloudsql.SQLClient.run_sql()</p>
<ol class="arabic simple">
<li><p>returns a namedtuple</p></li>
<li><p>ensure the job is successfully put into the queue</p></li>
<li><p>synchronous call but has the option to NOT return the data - avoid memory overload</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pagesize</strong> (<em>int</em><em>, </em><em>optional</em>) – an integer indicating the number of rows for each partition/page [using PARTITIONED EVERY &lt;pagesize&gt; ROWS syntax]</p></li>
<li><p><strong>get_result</strong> (<em>bool</em><em>, </em><em>optional</em><em> (</em><em>default=False</em><em>)</em>) – add the capability to return only the job_id, but wait for the job’s completion. Later, we can get the data using <a class="reference internal" href="#cloud_utilities.sql_query.SQLClient.get_result" title="cloud_utilities.sql_query.SQLClient.get_result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_result()</span></code></a> (job_id, pagenumber)</p></li>
<li><p><strong>blocking</strong> (<em>bool</em><em>, </em><em>optional</em><em> (</em><em>default=True</em><em>)</em>) – If True, wait until the queue is available</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>get_result</cite> = True, then behavior like <a href="#id3"><span class="problematic" id="id4">`</span></a>ibmcloudsql.run_sql`() which load returned data into memory.
The default behavior is opposite, to avoid unnecessarily overload the memory.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>namedtuple [<cite>data</cite>, <cite>job_id</cite>]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The query can return data or not. If it is supposed to return data then</p>
<ul class="simple">
<li><p>data can be of type: str (the error messsage, if failed) or pd.DataFrame (the real data, if succeed) - use <cite>isinstance(data, str)</cite> to check</p></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.run_templated_sql">
<code class="sig-name descname">run_templated_sql</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em>, <em class="sig-param">pagesize=None</em>, <em class="sig-param">get_result=False</em>, <em class="sig-param">blocking=True</em>, <em class="sig-param">store_as='csv'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.run_templated_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.run_templated_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Run, and store the result as CSV, PARQUET</p>
<blockquote>
<div><dl class="simple">
<dt>Arguments:</dt><dd><p>sql_stmt {[type]} – [description]</p>
</dd>
<dt>Keyword Arguments:</dt><dd><p>pagesize {[type]} – [description] (default: {None})
get_result {bool} – [description] (default: {False})
blocking {bool} – [description] (default: {True})
store_as {str} – [description] (default: {“csv”})</p>
</dd>
</dl>
</div></blockquote>
<p>TODO: implement this</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.show_catalog_tables">
<code class="sig-name descname">show_catalog_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.show_catalog_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.show_catalog_tables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.sql_info">
<code class="sig-name descname">sql_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.sql_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.sql_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this to get useful information about SQL Query</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.submit">
<code class="sig-name descname">submit</code><span class="sig-paren">(</span><em class="sig-param">pagesize=None</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>run the internal SQL statement that you created using the APIs provided by SQLMagic</p>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.submit_sql">
<code class="sig-name descname">submit_sql</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em>, <em class="sig-param">pagesize=None</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.submit_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.submit_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous call - submit and quickly return the job_id.
It is recommended to use this API, instead of ibmcloudsql.SQLQuery.submit_sql()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sql_stmt</strong> (<em>str</em>) – SQL Query string</p></li>
<li><p><strong>pagesize</strong> (<em>int</em><em>, </em><em>optional</em>) – an integer indicating the number of rows for each partition/page
[using PARTITIONED EVERY &lt;pagesize&gt; ROWS syntax]</p></li>
<li><p><strong>blocking</strong> (<em>bool</em><em>, </em><em>optional</em><em> (</em><em>default=True</em><em>)</em>) – <p>If True, wait until the queue is available</p>
<p>Default, wait. Otherwise, return if the queue is not available</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>job_id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#cloud_utilities.exceptions.MaxRequestError" title="cloud_utilities.exceptions.MaxRequestError"><strong>MaxRequestError</strong></a> – when the SQLQUery instance is serving the max-limit of requests</p></li>
<li><p><strong>SyntaxError</strong> – for both KeyError or HTTPError</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl -XPOST                 --url &quot;https://api.sql-query.cloud.ibm.com/v2/sql_jobs?instance_crn=YOUR_SQL_QUERY_CRN&quot;                 -H &quot;Accept: application/json&quot;                 -H &quot;Authorization: Bearer YOUR_BEARER_TOKEN&quot;                 -H &quot;Content-Type: application/json&quot;                 -d &#39;{&quot;statement&quot;:&quot;SELECT firstname FROM cos://us-geo/sql/employees.parquet STORED AS PARQUET WHERE EMPLOYEEID=5 INTO cos://us-geo/target-bucket/q1-results&quot; }&#39;</span>
</pre></div>
</div>
<p>NOTE:</p>
<p>1. All the headers (-H) can be put into a dictionary and
passed to the <em>headers</em> argument of requests.post() API.</p>
<p>2. All the data (-d option) is put into a dictionary and
passed to the <em>json</em> argument of requests.post() API.</p>
<blockquote>
<div><ul class="simple">
<li><p>‘statement’: value is full SQL statement in string</p></li>
<li><p>‘resultset_target’ (optional): only need when there is no ‘INTO statement’ in the query string, and the value must be the COS URL output</p></li>
</ul>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sqlData</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;statement&#39;</span><span class="p">:</span> <span class="n">sql_stmt</span><span class="p">}</span>
<span class="n">request_headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">}</span>
<span class="n">request_headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span><span class="s1">&#39;application/json&#39;</span><span class="p">})</span>
<span class="n">request_headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_agent</span><span class="p">})</span>
<span class="n">request_headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;authorization&#39;</span><span class="p">:</span> <span class="s1">&#39;Bearer </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ro_credentials</span><span class="o">.</span><span class="n">token</span><span class="p">)})</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;https://api.sql-query.cloud.ibm.com/v2/sql_jobs?instance_crn=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_crn</span><span class="p">),</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">request_headers</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="n">sqlData</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &quot;errors&quot;: [</span>
<span class="sd">        {</span>
<span class="sd">        &quot;code&quot;: &quot;bad_request&quot;,</span>
<span class="sd">        &quot;message&quot;: &quot;Target url specified in parameter resultset_target and as part of into clause in statement&quot;</span>
<span class="sd">        }</span>
<span class="sd">    ]</span>
<span class="sd">}</span>
<span class="sd">{</span>
<span class="sd">    &quot;job_id&quot;: &quot;e2adca0a-9247-4cfa-ac58-db4b2bc33a01&quot;,</span>
<span class="sd">    &quot;status&quot;: &quot;queued&quot;</span>
<span class="sd">}</span>
<span class="sd">{</span>
<span class="sd">    &quot;status_code&quot;: 429,</span>
<span class="sd">    &quot;errors&quot;: [</span>
<span class="sd">        {</span>
<span class="sd">        &quot;code&quot;: &quot;too_many_requests&quot;,</span>
<span class="sd">        &quot;message&quot;: &quot;This instance is currently running its maximum number of query jobs. Try again later, after at least one of the currently running jobs has completed.&quot;</span>
<span class="sd">        }</span>
<span class="sd">    ]</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># error code information: https://cloud.ibm.com/apidocs/sql-query</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.submit_sql_with_checking_saved_jobs">
<code class="sig-name descname">submit_sql_with_checking_saved_jobs</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em>, <em class="sig-param">pagesize=None</em>, <em class="sig-param">prefix=None</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.submit_sql_with_checking_saved_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.submit_sql_with_checking_saved_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the checking if a previous job is completed. The comparison is based on the SQL query content.
The content of previous queries are stored in a file,
with name given by <cite>prefix</cite> argument, stored as an asset in the Project-Lib.
This is used in the scenario when you launch many many jobs, and don’t want to restart from the
beginning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prefix</strong> (<em>str</em><em>, </em><em>optional</em>) – If it is used, it will looks into the ProjectLib for an asset file name $prefix.json
and compare the full sql statement if it has been used
If yes, and the result is successful, there is no need to rerun it</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This depends on the usage of <code class="xref py py-meth docutils literal notranslate"><span class="pre">COSClient.connect_project_lib()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">COSClient.read_project_lib_data()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cloud_utilities.sql_query.SQLClient.wait_for_job">
<code class="sig-name descname">wait_for_job</code><span class="sig-paren">(</span><em class="sig-param">job_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#SQLClient.wait_for_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.SQLClient.wait_for_job" title="Permalink to this definition">¶</a></dt>
<dd><p>It’s possible that the job’s failed because of Spark’s internal error.
So “unknown” is added for such cases.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>‘failed’, ‘completed’, or ‘unknown’</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_query.check_saved_jobs_decorator">
<code class="sig-prename descclassname">cloud_utilities.sql_query.</code><code class="sig-name descname">check_saved_jobs_decorator</code><span class="sig-paren">(</span><em class="sig-param">f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#check_saved_jobs_decorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.check_saved_jobs_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>a decorator that load data from ProjectLib, check for completed SQL Query job, before deciding to launch it</p>
</dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_query.submit_sql_with_checking_saved_jobs">
<code class="sig-prename descclassname">cloud_utilities.sql_query.</code><code class="sig-name descname">submit_sql_with_checking_saved_jobs</code><span class="sig-paren">(</span><em class="sig-param">sql_stmt</em>, <em class="sig-param">pagesize=None</em>, <em class="sig-param">prefix=None</em>, <em class="sig-param">blocking=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#submit_sql_with_checking_saved_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.submit_sql_with_checking_saved_jobs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cloud_utilities.sql_query.test_run">
<code class="sig-prename descclassname">cloud_utilities.sql_query.</code><code class="sig-name descname">test_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/sql_query.html#test_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.sql_query.test_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-cloud_utilities.utilities">
<span id="cloud-utilities-utilities-module"></span><h2>cloud_utilities.utilities module<a class="headerlink" href="#module-cloud_utilities.utilities" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cloud_utilities.utilities.IBMCloudAccess">
<em class="property">class </em><code class="sig-prename descclassname">cloud_utilities.utilities.</code><code class="sig-name descname">IBMCloudAccess</code><span class="sig-paren">(</span><em class="sig-param">cloud_apikey=''</em>, <em class="sig-param">client_info=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/utilities.html#IBMCloudAccess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.utilities.IBMCloudAccess" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Provide APIs to get credentials to interact with IBM Cloud services, e.g. COS, SQL Query</p>
<dl class="method">
<dt id="cloud_utilities.utilities.IBMCloudAccess.logon">
<code class="sig-name descname">logon</code><span class="sig-paren">(</span><em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/utilities.html#IBMCloudAccess.logon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.utilities.IBMCloudAccess.logon" title="Permalink to this definition">¶</a></dt>
<dd><p>”
An AIM token is needed for any operations to IBM cloud services (e.g. COS)
A new AIM token is created after 300 seconds.
A token is valid for 3600 seconds</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cloud_utilities.utilities.rename_keys">
<code class="sig-prename descclassname">cloud_utilities.utilities.</code><code class="sig-name descname">rename_keys</code><span class="sig-paren">(</span><em class="sig-param">d</em>, <em class="sig-param">keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/utilities.html#rename_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.utilities.rename_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename keys from <cite>d</cite> that are present as a key in <cite>keys</cite> by the
corresponding value in <cite>keys</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>{dict} --</strong><strong> [</strong><strong>a dict whose certain keys need to be updated</strong><strong>]</strong> (<em>d</em>) – </p></li>
<li><p><strong>{dict} --</strong><strong> [</strong><strong>a dict that map old key to new key</strong><strong>]</strong> (<em>keys</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>[dict] – [an updated dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cloud_utilities.utilities.static_vars">
<code class="sig-prename descclassname">cloud_utilities.utilities.</code><code class="sig-name descname">static_vars</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cloud_utilities/utilities.html#static_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cloud_utilities.utilities.static_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>use this as a decorator to a function to assign default value to static variable, e.g. var_stat</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@static_vars</span><span class="p">(</span><span class="n">var_stat</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="n">func</span><span class="o">.</span><span class="n">var_stat</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">var_stat</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p>IMPORTANT: Inside the function, access to the variable should be using the function name, e.g. func.var_stat</p>
</dd></dl>

</div>
<div class="section" id="module-cloud_utilities">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cloud_utilities" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020, IBM Research.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/cloud_utilities.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>